% -*- coding: utf-8 -*-
\TotalCheck=\dimexpr \need + \leftover \relax
\message{TRACE: final,
         ${lang}-${fid}, \the\pageno=$pageword, use=<\the\useFontSZ,\the\useBaseSkip>,
         txt=<\the\ht\toptry,\the\ht\bottry,\the$alsoreg>[\the\need], o=\the\leftover,
         img=<\the\ht\topimg,\the\ht\botimg>[\the\imgneed], \the\TotalCheck<\the\MiscTare>,
         v=\the\vsize<\the\textheight> @}
\message{FINAL, SIZE: \the\useFontSZ, SKIP: \the\useBaseSkip, VSIZE: \the\vsize, NEED: \the\need, img=\the\imgneed, txt=\the\txtneed, ref=\the\refneed@}
\ifdim \vsize < \the\need \relax
    \message{WARNING: No room (\the\leftover) for both frames on page \the\pageno , in <<<[language]>>> version@}
    % This makes the lines closer together in order to not have text off the bottom of the page
    \useBaseSkip=\dimexpr 0.90 \useBaseSkip \relax % this is a last-ditch patch to try to make it fit
    \leftover=0.0pt
\fi
\ifdim \vsize < \dimexpr \the\need + \the\MiscTare \relax \relax
    \message{WARNING: No room (\the\leftover) for both frames on page \the\pageno , in <<<[language]>>> version@}
    % This makes the lines closer together in order to not have text off the bottom of the page
    \useBaseSkip=\dimexpr 0.90 \useBaseSkip \relax % this is a last-ditch patch to try to make it fit
    \leftover=0.0pt
\fi
\ifdim \leftover > 20.0pt \relax
    \leftover=20.0pt
\fi
\setupinterlinespace[line=\the\useBaseSkip,top=0.0,bottom=0.0]
